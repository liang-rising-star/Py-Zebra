# Py-Zebra QR Code Generator

一个功能强大的加密二维码生成和解密工具，支持双层加密（自定义算法 + RSA），提供安全的信息传输方案。

## 功能特点

### 1. 基础功能
- **制作二维码**：从文本文件生成二维码
- **二维码解码**：解码已有的二维码图片
- **保存二维码**：将生成的二维码保存为图片文件

### 2. 加密功能
- **加密二维码**：使用双层加密算法生成安全的二维码
- **解密二维码**：解码并解密加密的二维码
- **生成密钥**：创建RSA密钥对并加密保存
- **加载密钥**：从二维码加载和解密密钥

## 加密算法

### 内层：自定义验算加密
1. 明文转 ASCII
2. Key = (密码各位数字之和 × 密码) mod 256
3. c = (ASCII + Key) mod 256
4. C = c XOR Key
5. 结果倒序，转16进制

### 外层：非对称加密（RSA）
- 加密顺序：明文 → 内层验算加密 → 外层公钥加密 → 生成二维码
- 解密顺序：二维码 → 外层私钥解密 → 内层验算解密 → 明文

## 安装步骤

1. **安装依赖**
   ```bash
   pip install qrcode pyzbar pillow pycryptodome
   ```

2. **运行程序**
   ```bash
   python main.py
   ```

## 使用方法

### 1. 生成密钥
1. 点击菜单「加密二维码」→「生成密钥」
2. 输入两个密码：
   - 密码1：用于生成密钥
   - 密码2：用于解开密钥
3. 选择保存位置，保存生成的密钥二维码

### 2. 加载密钥
1. 点击菜单「加密二维码」→「加载密钥」
2. 输入密码2（解开密钥的密码）
3. 选择密钥二维码文件
4. 密钥将自动加载并保存到程序目录

### 3. 加密二维码
1. 点击菜单「加密二维码」→「加密二维码」
2. 输入需要加密的文本内容
3. 选择已加载的公钥
4. 选择保存位置，保存加密二维码

### 4. 解密二维码
1. 点击菜单「加密二维码」→「解密二维码」
2. 选择密钥文件并输入密码
3. 选择要解密的二维码文件
4. 解密结果将显示并保存到 `code.txt`

### 5. 命令行使用
```bash
# 生成普通二维码
python main.py zebra <输入文件> [输出路径]

# 解码普通二维码
python main.py unzebra <二维码图片路径>
```

## 目录结构

```
QR_code/
├── main.py          # 主程序
├── keys/            # 密钥目录
│   ├── encrypted/   # 加密的密钥文件
│   └── decrypted/   # 解密的密钥文件
└── code.txt         # 解密结果保存文件
```

## 注意事项

1. **密钥安全**：请妥善保管生成的密钥二维码，不要泄露给他人
2. **密码管理**：请记住设置的密码，特别是密码2（用于解开密钥）
3. **文件格式**：加密功能支持文本内容，解密结果将保存为 `code.txt`
4. **依赖要求**：需要安装 pycryptodome 库进行RSA加密

## 技术说明

- **RSA密钥**：使用1024位密钥，平衡安全性和二维码容量
- **错误处理**：所有操作都有错误提示，确保用户体验
- **界面设计**：简洁易用的GUI界面，支持中文操作

## 版本信息

- **版本**：1.0.0
- **作者**：liang-rising-star
- **GitHub**：https://github.com/liang-rising-star/Py-Zebra

## 许可证

LGPL-2.1 license
